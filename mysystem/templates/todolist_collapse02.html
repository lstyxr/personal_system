<!DOCTYPE html>
<html lang="en">

{% include 'header.html' %}

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">

        {% include 'sidebar.html' %}

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Begin Page Content -->
                <div class="container-fluid">       

                  <form action="/todolist/add" method="POST">
                    <div class="form-group col-xl-8 mx-auto mb-3">
                        <div class="form-group">
                            <label>创建一个大任务</label>
                            {{form.body(class="form-control", placeholder="请输入要创建的任务...")}}
                        </div>
                    </div>
                  </form>

                    <div id="accordion">
                      {% for todo in todos %}
                      <div class="card">
                        <div class="card-header" id="heading{{todo.id}}">
                          <h5 class="mb-0">
                            <button class="btn btn-link" data-toggle="collapse" data-target="#collapse{{todo.id}}" aria-expanded="true" aria-controls="collapse{{todo.id}}">
                              {{todo.body}}
                            </button>
                          </h5>
                        </div>
                    
                        <div id="collapse{{todo.id}}" class="collapse show" aria-labelledby="heading{{todo.id}}" data-parent="#accordion">
                          <div class="card-body border border-light">
                            <div class="card-body border border-light">
                              <label class="card-text d-inline">创建子任务</label>
                              <input type="text" id="myinput" class="form-control"></input>
                              <input type="hidden" id="collapse" value="{{todo.id}}"></input>
                            </div>
                          </div>
                          {% for sub_plan in sub_plans %}
                          {% if sub_plan.plan_id == todo.id %}
                          <div class="card-body border border-light">
                            <p class="card-text d-inline">{{sub_plan.body}}</p>
                            {% if sub_plan.is_done == 1 %}
                            <input type="checkbox" data-todo-id="{{sub_plan.id}}" value="{{todo.id}}" class="btn-check d-inline float-right" autocomplete="off" checked>
                            {% else %}
                            <input type="checkbox" data-todo-id="{{sub_plan.id}}" value="{{todo.id}}" class="btn-check d-inline float-right" autocomplete="off">
                            {% endif %}
                          </div>
                          {% endif %}
                          {% endfor %}
                        </div>
                      </div>
                      {% endfor %}
                      <div class="card">
                        <div class="card-header" id="headingTwo">
                          <h5 class="mb-0">
                            <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                              Collapsible Group Item #2
                            </button>
                          </h5>
                        </div>
                        <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo" data-parent="#accordion">
                          <div class="card-body">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                          </div>
                        </div>
                      </div>
                      <div class="card">
                        <div class="card-header" id="headingThree">
                          <h5 class="mb-0">
                            <button class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                              Collapsible Group Item #3
                            </button>
                          </h5>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordion">
                          <div class="card-body">
                            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                          </div>
                        </div>
                      </div>
                    </div>
                </div>
            <!-- End of Main Content -->
            
            </div>
        <!-- End of Content Wrapper -->
        </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div class="modal-body">Select "Logout" below if you are ready to end your current session.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" href="login.html">Logout</a>
                </div>
            </div>
        </div>
    </div>
    {% include 'footer.html' %}
</body>

</html>